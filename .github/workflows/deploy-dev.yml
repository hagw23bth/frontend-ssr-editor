name: Build and deploy frontend to GitHub Pages - DEV

on:
  push:
    branches: [ dev ]

permissions:
  contents: write

jobs:
  build-and-deploy:
    runs-on: ubuntu-latest
    steps:
    - name: Checkout code
      uses: actions/checkout@v4

    - name: Set up Node.js
      uses: actions/setup-node@v4
      with:
        node-version: 18
  
    - name: Install dependencies
      run: npm install
  
    - name: Build project
      env:
        CI: 'false' # Disable CI mode to not fail on warnings
        REACT_APP_API_URL: https://jsramverk-editor-dev-hagw23-e7a9egbngzctgeau.northeurope-01.azurewebsites.net
        PUBLIC_URL: /frontend-ssr-editor/dev
      run: npm run build

    - name: frontend-ssr-editor-dev
      uses: peaceiris/actions-gh-pages@v3
      with:
        github_token: ${{ secrets.GITHUB_TOKEN }}
        publish_dir: build
        destination_dir: dev
